Prospective study on the etiology of community-acquired pneumonia in children and adults in Spain. The cause of primary pneumonia was diagnosed in 157 of 198 children and 165 of 207 adults seen as inpatients or outpatients in a 12-month period. In children Mycoplasma pneumoniae and pneumococcus were identified in 79 and 29 cases respectively. Twenty-nine of 53 cases of viral infection in children were caused by respiratory syncytial virus, two-thirds of the cases occurring in children under three years of age. No children died of pneumonia. In adults pneumococcus was the most common pathogen, accounting for 81 cases. The overall mortality in adults was 7.7%. A high mortality was found in patients with Haemophilus influenzae and other gram-negative bacilli infections, and in elderly patients with pneumococcal pneumonia. Coagglutination was more sensitive than counterimmunoelectrophoresis for the detection of pneumococcal antigen in respiratory samples (p less than 0.001). Counterimmunoelectrophoresis was the only useful technique for detection of pneumococcal antigen in urine specimens, concentration, overnight storage at 4 degrees C and specific staining significantly increasing positivity (p less than 0.001).